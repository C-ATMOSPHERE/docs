## Инструкция по установке тестовых версий (без использования Windows Store) на компьютер с windows 10.

К сожалению Майрософт не сделала процесс установки такого типа приложений без Windows Store проще поэтому прийдется следовать их правилам.
Я заранее извиняюсь за очень сложный процесс установки. Позже попробую избавиться от шага **Установка зависимостей**.

### Системные требования

Windows 10 версии 16299 (Fall Creators Update) и выше

### Как посмотреть версию системы и Тип системы?

Для этого необходимо в меню пуск нажать на шестеренку в левом нижнем углу далее перейти в Система -> О системе.  
В разделе Характеристики Windows будет пункт Сборка ОС. И еще сразу посмотрите на пункт Тип ситемы, он нам тоже понадобиться.

![Версия системы](https://github.com/anilibria/anilibria-win/blob/master/doc/assets/systemversion.jpg?raw=true)

### Скачивание версии

Переходим на страницу с релизами https://github.com/anilibria/anilibria-win/releases

На этой странице представлены все тестовые версии приложения.
Все версии маркируются префиксами prealpha/alpha/beta/stable.
Ниже описаны что они означают. Обычно лучше брать последнюю версию (в списке они от старшей к младшей расположены т.е. самая последняя вначале),
стоит также обращать внимание на префиксы.

* **prealpha** содержит новый функционал который не доработан или только в процессе доработки.
* **alpha** содержит новый функционал в каком-то плюс минус законченном виде но нет гарантий что он работает стабильно.
* **beta** содержит новый функционал в уже финальном виде но опять же не факт что оно работает стабильно.
* **stable** это релизная версия которая отправиться в Windows Store или на сайт и будет доступна широкому кругу пользователей.

## Первоначальная установка версии

Данные шаги необходимы если Вы в первый раз ставите на конкретной машине приложение.
Возможно выполнение некоторых из этих шагов понадобиться и в дальнейшем, но не при каждой установке.

Все манипуляции ниже требуют наличия администраторских прав, поэтому если у Вас нет таковых то попросите у кого есть.

### Установка сертификата

Распакуйте скачанный в разделе **Скачивание версии** архив в любую папку на диске.  
Далее в корне распакованной папки будет находиться файл с расширением .cer  
Выполните его (кликните дважды мышкой) и затем нажмите на кнопку **Установить сертификат**.  
![Установка сертификата](https://github.com/anilibria/anilibria-win/blob/master/doc/assets/installcertificate.jpg?raw=true)  
Выберите **Локальный компьютер**, и далее **Поместить все сертификаты в следующее хранилище**.  
![Установка расположения сертификата](https://github.com/anilibria/anilibria-win/blob/master/doc/assets/certifilocation.jpg?raw=true)  
Нажмите на кнопку **Обзор** рядом с полем **Хранилище сертификатов** и в открывшимся диалоге выберите **Доверенные корневые центры сертификации** и нажмите **ОК**.

### Установка зависимостей

Когда установка происходит из Windows Store механизм установки сам поставит все зависимости но к сожалению в нашем случае нам прийдется самим этим заняться.
В корне распакованной папки из шага **Скачивание версии** зайдите в папку Dependencies. Далее Вам надо зайти в папку в зависимости от **Типа системы**.
Как узнать какой у Вас тип системы я описал в разделе **Как посмотреть версию системы и Тип системы**.
Далее переходим в папку соответственно Вашему типу системы:
- Если в типе системы написано **64-разрядная операционная система, процессор x64** то значит переходим в папку x64
- Если в типе системы написано **32-разрядная операционная система, процессор x86** то значит переходим в папку x86
- Если в типе системы написано **32-разрядная операционная система, процессор ARM** то значит переходим в папку arm  
  
После перехода в папку запустите (дважды щелкните) на каждый файл с расширением **.appx** а в открывшихся окнах нажмайте **Install**.

### Установка приложения

После выполнения всех вышеупомянутых шагов можно вернуться в корень папки из раздела **Скачивание версии** и выполнить (дважды кликнуть) на файл
с расширением **.appxbundle** (он будет называться Anilibria_0.0.2.0_x86_x64_arm_Debug или похоже).
Откроется окно в котором достаточно нажать на кнопку **Install/Update**. Галочка **Launch when ready** если стоит означает что приложение запустится сразу после установки.  
![Установка приложения](https://github.com/anilibria/anilibria-win/blob/master/doc/assets/installer.jpg?raw=true)

### Обновление приложения

Для обновления приложения Вам достаточно скачать новую версию и выполнить действия из раздела **Установка приложения** повторно.

## Известные ошибки при установке версии

### Проблема с сертификатом

Если на шаге **Установка приложения** у Вас окно установки похоже на это:  
![Проблема с сертификатом](https://github.com/anilibria/anilibria-win/blob/master/doc/assets/certificatefailedinstall.jpg?raw=true)  
Убедитесь что Вы корректно выполнили установку сертификата из шага **Установка сертификата**, от неправильно указанного расположения и/или распределения прав сертификат может не работать.

### Проблема с зависимостями

Если на шаге **Установка приложения** у Вас окно установки похоже на это:  

![Проблемы с зависимостями](https://github.com/anilibria/anilibria-win/blob/master/doc/assets/dependencieserror.jpg?raw=true)  
Убедитесь что Вы корректно установили зависимости из шага **Установка зависимостей**. Обратите внимание возможно Вы установили зависимости из папки которая не соответствует Вашему **Типу системы**.
